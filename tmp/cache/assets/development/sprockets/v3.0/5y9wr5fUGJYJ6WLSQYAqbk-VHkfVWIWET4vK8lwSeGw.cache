I"ü(function() {
  var rev;

  rev = JSON.parse(gon.restaurants);

  window.onload = function() {
    var k, len, r, results;
    results = [];
    for (k = 0, len = rev.length; k < len; k++) {
      r = rev[k];
      results.push(rate(r));
    }
    return results;
  };

  google.maps.event.addDomListener(window, 'load', function() {
    var i, infoW, k, len, marker, r, results;
    initmap();
    infoW = new google.maps.InfoWindow;
    window.markers = [];
    window.cnt = [];
    for (k = 0, len = rev.length; k < len; k++) {
      r = rev[k];
      cnt.push(r.name + '<br />' + r.comment);
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(r.x, r.y),
        map: map,
        label: r.name[0]
      });
      markers.push(marker);
    }
    i = 0;
    results = [];
    while (i < cnt.length) {
      markers[i].addListener('click', function() {
        var j, results1;
        j = 0;
        results1 = [];
        while (j < cnt.length) {
          if (this.getPosition() === markers[j].getPosition()) {
            infoW.setContent(cnt[j]);
          }
          infoW.open(cnt, this);
          results1.push(j++);
        }
        return results1;
      });
      results.push(i++);
    }
    return results;
  });

}).call(this);
:ET