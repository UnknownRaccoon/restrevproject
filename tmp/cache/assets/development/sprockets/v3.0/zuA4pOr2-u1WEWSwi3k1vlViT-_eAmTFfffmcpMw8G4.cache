I"l(function() {
  var rest;

  rest = JSON.parse(gon.restaurants);

  window.onload = function() {
    var i, len, r, results;
    results = [];
    for (i = 0, len = rest.length; i < len; i++) {
      r = rest[i];
      $('#' + r.id + 'mark1').raty({
        score: r.mark1,
        path: "assets",
        readOnly: true
      });
      $('#' + r.id + 'mark2').raty({
        score: r.mark2,
        path: "assets",
        readOnly: true
      });
      $('#' + r.id + 'mark3').raty({
        score: r.mark3,
        path: "assets",
        readOnly: true
      });
      results.push($('#' + r.id + 'avgrate').raty({
        score: r.mark1 * 0.4 + r.mark2 * 0.3 + r.mark3 * 0.3,
        path: "assets",
        readOnly: true
      }));
    }
    return results;
  };

  google.maps.event.addDomListener(window, 'load', function() {
    var i, len, map, mapCanvas, r, results;
    mapCanvas = document.getElementById('map');
    map = new google.maps.Map(document.getElementById('map'), {
      center: new google.maps.LatLng(46.4711427, 30.7396057),
      zoom: 14,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
    navigator.geolocation.getCurrentPosition(function(position) {
      map.setCenter({
        lat: position.coords.latitude,
        lng: position.coords.longitude
      });
      return map.setZoom(16);
    }, function() {});
    results = [];
    for (i = 0, len = rest.length; i < len; i++) {
      r = rest[i];
      results.push(new google.maps.Marker({
        position: new google.maps.LatLng(r.x, r.y),
        map: map,
        title: 'Hello World!'
      }));
    }
    return results;
  });

}).call(this);
:ET